(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1643:(e,t,r)=>{"use strict";r.d(t,{$:()=>a.$});var a=r(2596)},5720:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var a=r(5155),s=r(9137),n=r.n(s),i=r(2115);let l=(0,i.memo)(e=>{let{data:t,scale:r=2}=e,s=(0,i.useMemo)(()=>({width:"".concat(91*r,"mm"),height:"".concat(55*r,"mm"),transform:1!==r?"scale(".concat(r,")"):void 0,transformOrigin:"center center"}),[r]),n=(0,i.useMemo)(()=>{var e;return(null==(e=t.htmlContent)?void 0:e.trim())?(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg shadow-lg p-6",style:s,id:"business-card",dangerouslySetInnerHTML:{__html:t.htmlContent}}):null},[t.htmlContent,s]);return n||(0,a.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-lg p-6 flex flex-col justify-between",style:s,id:"business-card",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:t.name}),t.title&&(0,a.jsx)("p",{className:"text-lg text-gray-600 font-medium",children:t.title})]}),t.description&&(0,a.jsx)("div",{className:"flex-1 flex items-center",children:(0,a.jsx)("p",{className:"text-sm text-gray-700 text-center w-full",children:t.description})}),t.contacts.length>0&&(0,a.jsx)("div",{className:"space-y-1",children:t.contacts.map((e,t)=>(0,a.jsx)("p",{className:"text-xs text-gray-600",children:e},"contact-".concat(t)))})]})});l.displayName="BusinessCard";var d=r(4624),c=r(2085),o=r(1643),m=r(9688);let u=(0,c.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),x=i.forwardRef((e,t)=>{let{className:r,variant:s,size:n,asChild:i=!1,...l}=e,c=i?d.DX:"button";return(0,a.jsx)(c,{className:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,m.QP)((0,o.$)(t))}(u({variant:s,size:n,className:r})),ref:t,...l})});x.displayName="Button";var h=r(5599);function b(){let[e,t]=(0,i.useState)(null),[r,s]=(0,i.useState)(!0),[d,c]=(0,i.useState)(null),o=(0,i.useCallback)(async()=>{try{s(!0);let e=new AbortController,r=setTimeout(()=>e.abort(),1e4),a=await fetch("/api/card-data",{signal:e.signal,headers:{Accept:"application/json","Cache-Control":"no-cache"}});if(clearTimeout(r),!a.ok)throw Error("HTTP ".concat(a.status,": ").concat(a.statusText));let n=await a.json();n.error?(c(n.error),t(null)):(t(n),c(null))}catch(e){c(e instanceof Error?e.message:"Failed to load card data"),t(null)}finally{s(!1)}},[]);(0,i.useEffect)(()=>{o();let e=new EventSource("/api/reload");return e.onmessage=e=>{try{let t=JSON.parse(e.data);"reload"===t.type?o():t.type}catch(e){}},e.onerror=e=>{},e.onopen=()=>{},()=>{e.close()}},[o]);let m=(0,i.useCallback)(()=>{document.body.style.overflow="hidden",window.print(),setTimeout(()=>{document.body.style.overflow=""},100)},[]),u=(0,i.useMemo)(()=>(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Loading..."})]})}),[]),b=(0,i.useMemo)(()=>(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center max-w-md mx-auto p-6",children:[(0,a.jsx)("p",{className:"text-red-500 mb-4",children:d}),(0,a.jsx)(x,{onClick:o,variant:"outline",children:"Retry"})]})}),[d,o]),g=(0,i.useMemo)(()=>(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"No card data available"}),(0,a.jsx)(x,{onClick:o,variant:"outline",children:"Reload"})]})}),[o]);return r?u:d?b:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n(),{id:"e3bd5d5a4577383a",children:"@media print{*{visibility:hidden}.print-only,.print-only *{visibility:visible}.print-only{position:absolute;left:0;top:0;width:91mm;height:55mm;margin:0;padding:0;page-break-after:avoid;page-break-inside:avoid}body{margin:0;padding:0;background:white!important}@page{size:91mm 55mm;margin:0}}"}),(0,a.jsxs)("div",{className:"jsx-e3bd5d5a4577383a min-h-screen bg-gray-50 relative",children:[(0,a.jsx)("div",{className:"jsx-e3bd5d5a4577383a absolute top-4 right-4 z-10",children:(0,a.jsxs)(x,{onClick:m,className:"flex items-center gap-2",children:[(0,a.jsx)(h.A,{size:16}),"印刷・PDF出力"]})}),(0,a.jsx)("div",{className:"jsx-e3bd5d5a4577383a flex items-center justify-center min-h-screen p-8",children:(0,a.jsxs)("div",{className:"jsx-e3bd5d5a4577383a border-2 border-dashed border-gray-300 p-8 rounded-lg bg-white",children:[(0,a.jsx)("p",{className:"jsx-e3bd5d5a4577383a text-xs text-gray-500 mb-4 text-center",children:"実際のサイズ (91mm \xd7 55mm)"}),(0,a.jsx)("div",{className:"jsx-e3bd5d5a4577383a print-only hidden print:block",children:(0,a.jsx)(l,{data:e,scale:1})}),(0,a.jsx)("div",{className:"jsx-e3bd5d5a4577383a print:hidden",children:(0,a.jsx)(l,{data:e,scale:1})})]})})]})]}):g}},6468:(e,t,r)=>{Promise.resolve().then(r.bind(r,5720))}},e=>{var t=t=>e(e.s=t);e.O(0,[958,441,684,358],()=>t(6468)),_N_E=e.O()}]);