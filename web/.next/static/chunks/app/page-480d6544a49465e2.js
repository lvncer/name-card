(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1643:(e,t,n)=>{"use strict";n.d(t,{$:()=>a.$});var a=n(2596)},5720:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f});var a=n(5155),r=n(9137),i=n.n(r),s=n(2115);let o=(0,s.memo)(e=>{let{data:t,scale:n=2}=e,r=(0,s.useMemo)(()=>({width:"".concat(91*n,"mm"),height:"".concat(55*n,"mm"),transform:1!==n?"scale(".concat(n,")"):void 0,transformOrigin:"center center"}),[n]),i=(0,s.useMemo)(()=>{var e;return(null==(e=t.htmlContent)?void 0:e.trim())?(0,a.jsx)("div",{className:"business-card-content",style:r,id:"business-card",dangerouslySetInnerHTML:{__html:t.htmlContent}}):null},[t.htmlContent,r]);return i||(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg shadow-lg flex flex-col justify-between",style:r,id:"business-card",children:(0,a.jsxs)("div",{className:"p-2 flex flex-col justify-between h-full",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:t.name}),t.title&&(0,a.jsx)("p",{className:"text-lg text-gray-600 font-medium",children:t.title})]}),t.description&&(0,a.jsx)("div",{className:"flex-1 flex items-center",children:(0,a.jsx)("p",{className:"text-sm text-gray-700 text-center w-full",children:t.description})}),t.contacts.length>0&&(0,a.jsx)("div",{className:"space-y-1",children:t.contacts.map((e,t)=>(0,a.jsx)("p",{className:"text-xs text-gray-600",children:e},"contact-".concat(t)))})]})})});o.displayName="BusinessCard";var l=n(4624),c=n(2085),d=n(1643),m=n(9688);let p=(0,c.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),x=s.forwardRef((e,t)=>{let{className:n,variant:r,size:i,asChild:s=!1,...o}=e,c=s?l.DX:"button";return(0,a.jsx)(c,{className:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,m.QP)((0,d.$)(t))}(p({variant:r,size:i,className:n})),ref:t,...o})});x.displayName="Button";var u=n(5599);function f(){let[e,t]=(0,s.useState)(null),[n,r]=(0,s.useState)(!0),[l,c]=(0,s.useState)(null),d=(0,s.useCallback)(async()=>{try{r(!0);let e=new AbortController,n=setTimeout(()=>e.abort(),1e4),a=await fetch("/api/card-data",{signal:e.signal,headers:{Accept:"application/json","Cache-Control":"no-cache"}});if(clearTimeout(n),!a.ok)throw Error("HTTP ".concat(a.status,": ").concat(a.statusText));let i=await a.json();i.error?(c(i.error),t(null)):(t(i),c(null))}catch(e){c(e instanceof Error?e.message:"Failed to load card data"),t(null)}finally{r(!1)}},[]);(0,s.useEffect)(()=>{d();let e=new EventSource("/api/reload");return e.onmessage=e=>{try{let t=JSON.parse(e.data);"reload"===t.type?d():t.type}catch(e){}},e.onerror=e=>{},e.onopen=()=>{},()=>{e.close()}},[d]);let m=(0,s.useCallback)(()=>{document.body.style.overflow="hidden",window.print(),setTimeout(()=>{document.body.style.overflow=""},100)},[]),p=(0,s.useMemo)(()=>(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Loading..."})]})}),[]),f=(0,s.useMemo)(()=>(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center max-w-md mx-auto p-6",children:[(0,a.jsx)("p",{className:"text-red-500 mb-4",children:l}),(0,a.jsx)(x,{onClick:d,variant:"outline",children:"Retry"})]})}),[l,d]),b=(0,s.useMemo)(()=>(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-gray-500 mb-4",children:"No card data available"}),(0,a.jsx)(x,{onClick:d,variant:"outline",children:"Reload"})]})}),[d]);return n?p:l?f:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i(),{id:"8d47aa490fa7ef14",children:"@media print{.no-print{display:none!important}.print-card{position:absolute;left:0;top:0;width:91mm;height:55mm;margin:0;padding:0;page-break-after:avoid;page-break-inside:avoid;display:block!important}@page{size:91mm 55mm;margin:0}body{margin:0;padding:0}.business-card-content .flex{display:-webkit-box!important;display:-webkit-flex!important;display:-moz-box!important;display:-ms-flexbox!important;display:flex!important}.business-card-content .flex-col{display:-webkit-box!important;display:-webkit-flex!important;display:-moz-box!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-webkit-flex-direction:column!important;-moz-box-orient:vertical!important;-moz-box-direction:normal!important;-ms-flex-direction:column!important;flex-direction:column!important}.business-card-content .flex-row{display:-webkit-box!important;display:-webkit-flex!important;display:-moz-box!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-orient:horizontal!important;-webkit-box-direction:normal!important;-webkit-flex-direction:row!important;-moz-box-orient:horizontal!important;-moz-box-direction:normal!important;-ms-flex-direction:row!important;flex-direction:row!important}.business-card-content .items-center{-webkit-box-align:center!important;-webkit-align-items:center!important;-moz-box-align:center!important;-ms-flex-align:center!important;align-items:center!important}.business-card-content .justify-between{-webkit-box-pack:justify!important;-webkit-justify-content:space-between!important;-moz-box-pack:justify!important;-ms-flex-pack:justify!important;justify-content:space-between!important}.business-card-content .justify-center{-webkit-box-pack:center!important;-webkit-justify-content:center!important;-moz-box-pack:center!important;-ms-flex-pack:center!important;justify-content:center!important}}"}),(0,a.jsxs)("div",{className:"jsx-8d47aa490fa7ef14 min-h-screen relative",children:[(0,a.jsx)("div",{className:"jsx-8d47aa490fa7ef14 absolute top-4 right-4 z-10 no-print",children:(0,a.jsxs)(x,{onClick:m,className:"flex items-center gap-2",children:[(0,a.jsx)(u.A,{size:16}),"印刷・PDF出力"]})}),(0,a.jsxs)("div",{className:"jsx-8d47aa490fa7ef14 flex items-center justify-center min-h-screen",children:[(0,a.jsx)("div",{className:"jsx-8d47aa490fa7ef14 border-2 border-dashed border-gray-300 rounded-lg no-print",children:(0,a.jsx)(o,{data:e,scale:1})}),(0,a.jsx)("div",{className:"jsx-8d47aa490fa7ef14 print-card hidden print:block",children:(0,a.jsx)(o,{data:e,scale:1})})]})]})]}):b}},6468:(e,t,n)=>{Promise.resolve().then(n.bind(n,5720))}},e=>{var t=t=>e(e.s=t);e.O(0,[958,441,684,358],()=>t(6468)),_N_E=e.O()}]);